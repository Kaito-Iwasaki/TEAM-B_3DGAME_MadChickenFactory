//=====================================================================
//
// タイマー処理 [timer.cpp]
// Author : 
// 
//=====================================================================

//*********************************************************************
// 
// ***** インクルードファイル *****
// 
//*********************************************************************
#include "timer.h"
#include "DebugProc.h"
#include"fade.h"

//*********************************************************************
// 
// ***** マクロ定義 *****
// 
//*********************************************************************
#define INIT_TIMER		(300)
#define FRAME_TIMER		(60)		//時間が減るフレーム数


//*********************************************************************
// 
// ***** 列挙型 *****
// 
//*********************************************************************


//*********************************************************************
// 
// ***** 構造体 *****
// 
//*********************************************************************


//*********************************************************************
// 
// ***** プロトタイプ宣言 *****
// 
//*********************************************************************


//*********************************************************************
// 
// ***** グローバル変数 *****
// 
//*********************************************************************
int g_nTimer = 0;
int g_nFrame = 0;

//=====================================================================
// 初期化処理
//=====================================================================
void InitTimer(void)
{
	g_nTimer = INIT_TIMER;
	g_nFrame = FRAME_TIMER;
}

//=====================================================================
// 終了処理
//=====================================================================
void UninitTimer(void)
{

}

//=====================================================================
// 更新処理
//=====================================================================
void UpdateTimer(void)
{
	if (g_nTimer > 0)
	{
		
		if (g_nFrame >= 1)
		{//フレームが1以上の時減る

			g_nFrame--;

		}
		else if (g_nFrame <= 0)
		{//フレームが０以下になった時タイマーが減り,フレームが戻る

			g_nTimer--;
			g_nFrame = FRAME_TIMER;

		}
		
	}
	else
	{
		/*SetFade(MODE_RESULT);*/
	}
}

//=====================================================================
// 描画処理
//=====================================================================
void DrawTimer(void)
{
	// タイマーのデバッグ表示
	PrintDebugProc("タイマー:%d\n", g_nTimer);
}
int GetTimer(void)
{
	return  g_nTimer;
}